<div class="reset-password-container">
  <!-- Header -->
  <div class="header-section">
    <img
      src="assets/images/pup_taguig_logo.svg"
      alt="University Logo"
      class="university-logo" />
    <div class="header-text">
      <div class="university-name">
        POLYTECHNIC UNIVERSITY OF THE PHILIPPINES
      </div>
      <div class="system-name">FACULTY LOADING & SCHEDULING</div>
    </div>
  </div>

  @if (!isEmailSent) {
  <!-- Title -->
  <div class="title-container">
    <div class="title">
      <span mat-symbol="lock_reset" class="title-icon"></span>
      <h1>Reset Password</h1>
    </div>
    <p class="subtitle">
      Enter your email address to receive password reset instructions.
    </p>
  </div>

  <!-- Form -->
  <form [formGroup]="resetForm" (ngSubmit)="onSubmit()" class="reset-form">
    <mat-form-field appearance="fill">
      <mat-label>Email Address</mat-label>
      <mat-icon matPrefix class="prefix-icon">mail</mat-icon>
      <input
        matInput
        type="email"
        formControlName="email"
        placeholder="Enter your email"
        autocomplete="email" />
      @if (email?.errors?.['required'] && email?.touched) {
      <mat-error>Email is required</mat-error>
      } @if (email?.errors?.['email']) {
      <mat-error>Please enter a valid email address</mat-error>
      }
    </mat-form-field>

    <div class="actions">
      <!-- Cancel Button -->
      <button
        mat-button
        class="cancel-button"
        type="button"
        (click)="onCancel()">
        Back
      </button>

      <!-- Send Reset Link Button -->
      <button
        mat-flat-button
        class="send-button"
        type="submit"
        [class.disabled]="resetForm.invalid || isLoading"
        [disabled]="resetForm.invalid || isLoading">
        @if (isLoading) {
        <mat-spinner class="custom-spinner" diameter="25"></mat-spinner>
        } @else { Send Reset Link }
      </button>
    </div>
  </form>
  } @else {
  <!-- Success State -->
  <div class="success-container">
    <div class="title">
      <span mat-symbol="lock_reset" class="title-icon"></span>
      <h1>Reset Password</h1>
    </div>
    <p class="subtitle">
      If a faculty account exists with the email
      <span class="submitted-email">{{ resetForm.get('email')?.value }}</span
      >, you will receive password reset instructions in this email shortly.
    </p>

    <div class="info-box">
      <p>
        Note: Please check your email inbox and spam folder. The reset link will
        expire in 24 hours.
      </p>
    </div>

    <div class="actions">
      <button class="resend-button" mat-button (click)="resendEmail()">
        Resend Email
      </button>
      <button class="cancel-button" mat-button (click)="onCancel()">
        Back
      </button>
    </div>
  </div>

  }
</div>
